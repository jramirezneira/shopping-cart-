{"ast":null,"code":"import _regeneratorRuntime from \"C:\\\\proyectos\\\\cuponatic\\\\shopping-cart\\\\node_modules\\\\@babel\\\\runtime/regenerator\";\nimport _asyncToGenerator from \"C:\\\\proyectos\\\\cuponatic\\\\shopping-cart\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/asyncToGenerator\";\nimport * as types from '../constants/ActionTypes';\nimport { getVisibleProducts, getType, getLocation } from '../reducers/products';\nimport ProductItem from '../components/ProductItem';\nimport { connect } from 'react-redux';\n\nvar receiveProducts = function receiveProducts(products) {\n  return {\n    type: types.RECEIVE_PRODUCTS,\n    products: products\n  };\n};\n\nexport var getGeolocation =\n/*#__PURE__*/\nfunction () {\n  var _ref = _asyncToGenerator(\n  /*#__PURE__*/\n  _regeneratorRuntime.mark(function _callee() {\n    var geolocation;\n    return _regeneratorRuntime.wrap(function _callee$(_context) {\n      while (1) {\n        switch (_context.prev = _context.next) {\n          case 0:\n            geolocation = navigator.geolocation;\n            geolocation.getCurrentPosition.map(function (position) {\n              return position;\n            } // dispatch({ type: types.GET_LOCATION, position })     \n            , function (error) {\n              if (error.code === 1) return \"error\"; //dispatch({ type: types.GEOLOCATION_FAILED, payload: false }); \n            });\n\n          case 2:\n          case \"end\":\n            return _context.stop();\n        }\n      }\n    }, _callee);\n  }));\n\n  return function getGeolocation() {\n    return _ref.apply(this, arguments);\n  };\n}();\nexport var getAllProducts = function getAllProducts() {\n  return function (dispatch) {\n    var lc = getGeolocation();\n    console.log(lc);\n    fetch(\"https://ww4.cuponatic.com/get?c=Santiago&latitud=-33.45774340&longitud=-70.65735780&\").then(function (response) {\n      return response.json();\n    }, function (error) {\n      return console.log('An error occurred.', error);\n    }).then(function (json) {\n      return dispatch(receiveProducts(json));\n    });\n  };\n};\n\nvar chooseTypeSearchUnsafe = function chooseTypeSearchUnsafe(typechoose) {\n  return {\n    type: types.CHOOSE_TYPE_SEARCH,\n    typechoose: typechoose\n  };\n};\n\nexport var chooseTypeSearch = function chooseTypeSearch(type) {\n  return function (dispatch) {\n    dispatch(chooseTypeSearchUnsafe(type));\n  };\n};\n\nvar addToCartUnsafe = function addToCartUnsafe(productId) {\n  return {\n    type: types.ADD_TO_CART,\n    productId: productId\n  };\n};\n\nexport var addToCart = function addToCart(productId) {\n  return function (dispatch) {\n    dispatch(addToCartUnsafe(productId));\n  };\n};\n\nvar deleteToCartUnsafe = function deleteToCartUnsafe(productId) {\n  return {\n    type: types.DELETE_TO_CART,\n    productId: productId\n  };\n};\n\nexport var deleteToCart = function deleteToCart(productId) {\n  return function (dispatch) {\n    dispatch(deleteToCartUnsafe(productId));\n  };\n};\nexport var checkout = function checkout(products) {\n  return function (dispatch) {\n    dispatch({\n      type: types.CHECKOUT_REQUEST\n    });\n  };\n};\n\nvar ProductsContainer = function ProductsContainer(_ref2) {\n  var products = _ref2.products;\n  return console.log(\"products\");\n};\n\nvar mapStateToProps = function mapStateToProps(state) {\n  return {\n    //ff:getGeolocation(),\n    products: getVisibleProducts(state.products),\n    // type: getType(state),\n    loc: getLocation(state)\n  };\n};\n\nexport default connect(mapStateToProps)(ProductsContainer);","map":{"version":3,"sources":["C:\\proyectos\\cuponatic\\shopping-cart\\src\\actions\\index.js"],"names":["types","getVisibleProducts","getType","getLocation","ProductItem","connect","receiveProducts","products","type","RECEIVE_PRODUCTS","getGeolocation","geolocation","navigator","getCurrentPosition","map","position","error","code","getAllProducts","dispatch","lc","console","log","fetch","then","response","json","chooseTypeSearchUnsafe","typechoose","CHOOSE_TYPE_SEARCH","chooseTypeSearch","addToCartUnsafe","productId","ADD_TO_CART","addToCart","deleteToCartUnsafe","DELETE_TO_CART","deleteToCart","checkout","CHECKOUT_REQUEST","ProductsContainer","mapStateToProps","state","loc"],"mappings":"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","sourcesContent":["import * as types from '../constants/ActionTypes'\r\nimport { getVisibleProducts, getType, getLocation } from '../reducers/products'\r\nimport ProductItem from '../components/ProductItem'\r\nimport { connect } from 'react-redux'\r\n\r\nconst receiveProducts = products => ({\r\n  type: types.RECEIVE_PRODUCTS,\r\n  products\r\n})\r\n\r\n\r\nexport const getGeolocation =  async () => \r\n{    \r\n\r\n   \r\n    const geolocation = navigator.geolocation; \r\n    geolocation.getCurrentPosition.map ( position => \r\n       {return position}  // dispatch({ type: types.GET_LOCATION, position })     \r\n    , error => \r\n    { \r\n      if (error.code === 1)      \r\n          return \"error\"//dispatch({ type: types.GEOLOCATION_FAILED, payload: false }); \r\n     \r\n    } \r\n    ); \r\n}\r\n\r\n\r\nexport const  getAllProducts =  () => ( dispatch ) => {  \r\n \r\n  let lc =getGeolocation ();\r\n\r\n  console.log(lc);\r\n\r\n    fetch(\"https://ww4.cuponatic.com/get?c=Santiago&latitud=-33.45774340&longitud=-70.65735780&\")\r\n     .then(\r\n        response => response.json(),\r\n        error => console.log('An error occurred.', error)\r\n      )\r\n     .then(json =>\r\n          dispatch(receiveProducts(json))\r\n     )\r\n}\r\n\r\nconst chooseTypeSearchUnsafe = typechoose => ({\r\n  type: types.CHOOSE_TYPE_SEARCH,\r\n  typechoose\r\n})\r\n\r\nexport const chooseTypeSearch = type => (dispatch) => {\r\n    dispatch(chooseTypeSearchUnsafe(type))\r\n}\r\n\r\nconst addToCartUnsafe = productId => ({\r\n  type: types.ADD_TO_CART,\r\n  productId\r\n})\r\n\r\nexport const addToCart = productId => (dispatch) => {\r\n    dispatch(addToCartUnsafe(productId));\r\n}\r\n\r\nconst deleteToCartUnsafe = productId => ({\r\n  type: types.DELETE_TO_CART,\r\n  productId\r\n})\r\n\r\nexport const deleteToCart = productId => (dispatch) => {\r\n  dispatch(deleteToCartUnsafe(productId))\r\n}\r\n\r\nexport const checkout = products => (dispatch) => {\r\n  dispatch({\r\n    type: types.CHECKOUT_REQUEST\r\n  })\r\n \r\n}\r\n\r\n\r\n\r\nconst ProductsContainer = ({products} ) => (\r\n  \r\n  console.log(\"products\")\r\n \r\n)\r\n\r\nconst mapStateToProps = state => ({\r\n  //ff:getGeolocation(),\r\n  products: getVisibleProducts(state.products),  \r\n // type: getType(state),\r\n  loc:getLocation(state)\r\n})\r\n\r\nexport default connect(\r\n  mapStateToProps,  \r\n \r\n)(ProductsContainer)\r\n\r\n\r\n\r\n"]},"metadata":{},"sourceType":"module"}